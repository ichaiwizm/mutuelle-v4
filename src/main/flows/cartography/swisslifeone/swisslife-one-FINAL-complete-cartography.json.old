{
  "platform": "SwissLife One",
  "url": "https://www.swisslifeone.fr/",
  "product": "Santé Individuelle et Confort Hospitalisation",
  "extraction_date": "2025-01-19",
  "extraction_method": "Playwright MCP + Manual exploration - COMPLETE multi-step flow",
  "total_steps": 3,
  "authentication_required": true,

  "STEP_1_informations_projet": {
    "step_name": "Informations du projet et assurés",
    "total_fields": 25,
    "navigation": {
      "button_suivant": "Navigate to Step 2 (Pricing)"
    },

    "section_1_nom_projet": {
      "fields": [
        {
          "name": "nom_projet",
          "type": "textbox",
          "id": null,
          "required": true,
          "placeholder": null,
          "test_value": "Projet Test SwissLife"
        }
      ]
    },

    "section_2_vos_projets": {
      "fields": [
        {
          "name": "besoin_couverture_individuelle",
          "type": "radio",
          "required": true,
          "options": ["oui", "non"],
          "default": "oui",
          "triggers": "Shows entire 'Couverture santé individuelle' section when oui"
        },
        {
          "name": "besoin_indemnites_journalieres",
          "type": "radio",
          "required": true,
          "options": ["oui", "non"],
          "note": "Related to 'Confort Hospitalisation' product"
        }
      ]
    },

    "section_3_couverture_sante": {
      "subsection_type_simulation": {
        "fields": [
          {
            "name": "type_simulation",
            "type": "radio",
            "required": true,
            "options": ["Individuel", "Pour le couple"],
            "triggers": "Shows 'Conjoint' tab when 'Pour le couple' selected"
          }
        ]
      },

      "tab_assure_principal": {
        "always_visible": true,
        "fields": [
          {
            "name": "date_naissance",
            "type": "textbox",
            "format": "date",
            "required": true,
            "placeholder": "jj/mm/aaaa",
            "has_datepicker": true,
            "test_value": "15/01/1985"
          },
          {
            "name": "departement_residence",
            "type": "combobox",
            "id": "departement-assure-principal",
            "required": true,
            "options_count": 101,
            "options": ["01", "02", "03", "...", "95", "97", "2A", "2B"],
            "test_value": "75"
          },
          {
            "name": "regime_social",
            "type": "combobox",
            "id": "regime-social-assure-principal",
            "required": true,
            "options_count": 5,
            "options": [
              "Régime Général (CPAM)",
              "Régime Local (CPAM Alsace Moselle)",
              "Régime Général pour TNS (CPAM)",
              "Mutualité Sociale Agricole (MSA-Amexa)",
              "Autres régimes spéciaux"
            ],
            "test_value": "Régime Général (CPAM)",
            "triggers": "Loads Profession and Statut options dynamically"
          },
          {
            "name": "profession",
            "type": "combobox",
            "required": true,
            "dynamic": true,
            "loaded_after": "regime_social selection",
            "options_count": 6,
            "options": [
              "Médecin",
              "Chirurgien",
              "Chirurgien dentiste",
              "Pharmacien",
              "Auxiliaire médical",
              "Non médicale"
            ],
            "test_value": "Non médicale",
            "discovery_note": "NEW FIELD discovered during exploration - not in initial snapshot"
          },
          {
            "name": "statut",
            "type": "combobox",
            "id": "statut-assure-principal",
            "required": true,
            "dynamic": true,
            "loaded_after": "regime_social + profession selection",
            "options_count": 4,
            "options": [
              "Salarié et autres statuts",
              "Etudiant",
              "Travailleur transfrontalier",
              "Fonctionnaire"
            ],
            "test_value": "Salarié et autres statuts",
            "note": "Options vary based on regime_social selected"
          }
        ]
      },

      "tab_conjoint": {
        "conditional": "Visible only when type_simulation = 'Pour le couple'",
        "fields": [
          {
            "name": "conjoint_date_naissance",
            "type": "textbox",
            "format": "date",
            "id": "date-naissance-assure-conjoint",
            "required": true,
            "placeholder": "jj/mm/aaaa",
            "has_datepicker": true,
            "test_value": "20/03/1987",
            "validation": "Age must be between 16 and 99"
          },
          {
            "name": "conjoint_regime_social",
            "type": "combobox",
            "id": "regime-social-assure-conjoint",
            "required": true,
            "options_count": 5,
            "options": [
              "Régime Général (CPAM)",
              "Régime Local (CPAM Alsace Moselle)",
              "Régime Général pour TNS (CPAM)",
              "Mutualité Sociale Agricole (MSA-Amexa)",
              "Autres régimes spéciaux"
            ],
            "test_value": "Régime Général (CPAM)"
          },
          {
            "name": "conjoint_profession",
            "type": "combobox",
            "required": true,
            "dynamic": true,
            "options_count": 6,
            "options": [
              "Médecin",
              "Chirurgien",
              "Chirurgien dentiste",
              "Pharmacien",
              "Auxiliaire médical",
              "Non médicale"
            ],
            "test_value": "Non médicale",
            "discovery_note": "NEW FIELD - Conjoint also has Profession field"
          },
          {
            "name": "conjoint_statut",
            "type": "combobox",
            "id": "statut-assure-conjoint",
            "required": true,
            "options_count": 4,
            "options": [
              "Salarié et autres statuts",
              "Etudiant",
              "Travailleur transfrontalier",
              "Fonctionnaire"
            ],
            "test_value": "Salarié et autres statuts",
            "note": "Conjoint statut has pre-loaded options"
          }
        ]
      },

      "subsection_enfants": {
        "fields": [
          {
            "name": "nombre_enfants",
            "type": "combobox",
            "id": "sante-nombre-enfant-assures",
            "required": false,
            "options_count": 11,
            "options": ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10"],
            "test_value": "2",
            "triggers": "Shows dynamic table with N rows when > 0"
          }
        ],
        "dynamic_table": {
          "conditional": "Visible when nombre_enfants > 0",
          "columns": ["Enfant", "Date de naissance", "Ayant droit", "Delete"],
          "fields_per_child": [
            {
              "name": "enfant_N_date_naissance",
              "type": "textbox",
              "format": "date",
              "required": true,
              "has_datepicker": true,
              "test_values": ["01/01/2015", "01/01/2018"]
            },
            {
              "name": "enfant_N_ayant_droit",
              "type": "combobox",
              "required": true,
              "options": ["Assuré principal", "Conjoint"],
              "test_value": "Assuré principal"
            }
          ],
          "max_children": 10,
          "total_dynamic_fields": "2 fields × 10 max children = 20 fields"
        }
      },

      "subsection_gammes_options": {
        "fields": [
          {
            "name": "gammes",
            "type": "combobox",
            "id": "selection-produit-sante",
            "required": true,
            "dynamic": true,
            "loaded_after": "Complete form fill + regime + statut selection",
            "options_count": 3,
            "options": [
              "SwissLife Santé",
              "SwissLife Santé Additionnelle",
              "Swiss santé, Ma formule hospitalisation"
            ],
            "test_value": "SwissLife Santé"
          },
          {
            "name": "date_effet",
            "type": "textbox",
            "format": "date",
            "required": true,
            "has_datepicker": true,
            "test_value": "01/02/2025"
          },
          {
            "name": "loi_madelin",
            "type": "checkbox",
            "required": false,
            "has_info_link": "FAQ Madelin Prévoyance"
          },
          {
            "name": "reprise_concurrence_iso_garanties",
            "type": "radio",
            "required": true,
            "options": ["oui", "non"],
            "default": "non",
            "test_value": "non",
            "discovery_note": "NEW FIELD discovered - appears after gammes selection"
          },
          {
            "name": "resiliation_a_effectuer",
            "type": "radio",
            "id": "resiliation-contrat",
            "required": true,
            "options": ["oui", "non"],
            "test_value": "non",
            "has_info_link": "La résiliation infra annuelle des contrats santé"
          }
        ]
      }
    },

    "summary": {
      "total_base_fields": 19,
      "total_conjoint_fields": 4,
      "total_dynamic_child_fields": "2 × nombre_enfants (max 20)",
      "absolute_maximum_fields": 43,
      "required_fields": 17,
      "new_fields_discovered": 3,
      "new_field_names": [
        "profession (assuré principal)",
        "conjoint_profession",
        "reprise_concurrence_iso_garanties"
      ]
    }
  },

  "STEP_2_configuration_tarification": {
    "step_name": "Configuration des garanties et tarification",
    "total_fields": 10,
    "navigation": {
      "button_precedent": "Back to Step 1",
      "button_suivant": "Navigate to Step 3 (Documents)"
    },

    "tab_swisslife_sante": {
      "product_name": "SwissLife Santé",
      "fields": [
        {
          "name": "fractionnement",
          "type": "combobox",
          "required": false,
          "options_count": 4,
          "options": ["mensuel", "trimestriel", "semestriel", "annuel"],
          "default": "mensuel"
        },
        {
          "name": "reduction_famille",
          "type": "checkbox",
          "required": false,
          "default": true,
          "label": "Réduction famille"
        },
        {
          "name": "niveau_lineaire_garanties",
          "type": "combobox",
          "required": false,
          "options_count": 9,
          "options": ["Formule 1", "Formule 2", "Formule 3", "Formule 4", "Formule 5", "Formule 6", "Formule 7", "Formule 8", "Formule 9"],
          "default": "Formule 1",
          "note": "Global level selector - applies to all guarantee blocks"
        }
      ],

      "garanties_individuelles": {
        "note": "Individual guarantee level selectors - override global level",
        "fields": [
          {
            "name": "hospitalisation",
            "type": "combobox",
            "options_enabled": ["Formule 1", "Formule 2", "Formule 3"],
            "options_disabled": ["Formule 4", "Formule 5", "Formule 6", "Formule 7", "Formule 8", "Formule 9"],
            "default": "Formule 1"
          },
          {
            "name": "dentaire",
            "type": "combobox",
            "options_enabled": ["Formule 1", "Formule 2", "Formule 3"],
            "options_disabled": ["Formule 4", "Formule 5", "Formule 6", "Formule 7", "Formule 8", "Formule 9"],
            "default": "Formule 1"
          },
          {
            "name": "optique",
            "type": "combobox",
            "options_enabled": ["Formule 1", "Formule 2", "Formule 3"],
            "options_disabled": ["Formule 4", "Formule 5", "Formule 6", "Formule 7", "Formule 8", "Formule 9"],
            "default": "Formule 1"
          },
          {
            "name": "soins_courants",
            "type": "combobox",
            "options_enabled": ["Formule 1", "Formule 2", "Formule 3"],
            "options_disabled": ["Formule 4", "Formule 5", "Formule 6", "Formule 7", "Formule 8", "Formule 9"],
            "default": "Formule 1"
          },
          {
            "name": "aides_auditives",
            "type": "combobox",
            "options_enabled": ["Formule 1"],
            "options_disabled": ["Formule 2", "Formule 3", "Formule 4", "Formule 5", "Formule 6", "Formule 7", "Formule 8", "Formule 9"],
            "default": "Formule 1",
            "note": "Only Formule 1 available"
          },
          {
            "name": "prevention",
            "type": "combobox",
            "options_disabled": ["Formule 1"],
            "options_enabled": ["Formule 2", "Formule 3", "Formule 4"],
            "default": "Formule 1",
            "note": "Formule 1 disabled but pre-selected"
          }
        ]
      },

      "expandable_sections": {
        "carte_blanche": {
          "subsection": "Assistance vie quotidienne",
          "type": "tab"
        },
        "renvois_tableau": {
          "subsection": "Renvois du tableau de garanties",
          "type": "tab"
        }
      },

      "action_buttons": [
        "Enveloppe commerciale",
        "Ajouter une autre solution",
        "Documents à dispositions"
      ],

      "pricing_display": {
        "label": "Cotisations en € / mois et par contrat",
        "solution_code": "H1D1O1M1P1S0",
        "price_monthly": "168,36 €",
        "note": "Price updates dynamically based on guarantee selections"
      }
    },

    "summary": {
      "total_fields": 10,
      "comboboxes": 8,
      "checkboxes": 1,
      "buttons": 3,
      "pricing_display": true
    }
  },

  "STEP_3_synthese_documents": {
    "step_name": "Synthèse, mode de vente et documents",
    "total_tabs": 3,
    "navigation": {
      "button_precedent": "Back to Step 2",
      "button_suivant": "Navigate to Step 4 (Souscription) - NOT EXPLORED"
    },

    "tab_1_synthese": {
      "tab_name": "Synthèse",
      "content": {
        "type": "summary_table",
        "product": "SwissLife Santé",
        "columns": ["Cotisation", "En euros"],
        "data": {
          "solution": "Solution 1 H1D1O1M1P1S0",
          "price": "168,36€/mois"
        }
      }
    },

    "tab_2_mode_de_vente": {
      "tab_name": "Mode de vente",
      "fields": [
        {
          "name": "face_a_face",
          "type": "radio",
          "id": "type-vente",
          "required": true,
          "question": "Avez-vous vu en face-à-face votre prospect / client durant le process de souscription ?",
          "options": ["oui", "non"],
          "test_value": "oui",
          "validation_message": "Merci de déterminer le mode de vente.",
          "note": "Required before accessing Documents tab"
        }
      ]
    },

    "tab_3_documents_precontractuels": {
      "tab_name": "Documents précontractuels",
      "conditional": "Accessible only after mode_de_vente filled",

      "intro_text": {
        "face_a_face_oui": "Vous avez donc la possibilité de remettre votre documentation précontractuelle à votre prospect/client en l'imprimant au préalable ou bien de lui envoyer directement par email."
      },

      "document_selection_checkboxes": {
        "general": [
          {
            "name": "page_de_garde",
            "label": "Page de garde",
            "default": true,
            "required": false
          },
          {
            "name": "devoir_conseil_personnalise",
            "label": "Importer mon devoir de conseil personnalisé",
            "default": false,
            "required": false,
            "has_info_text": true
          }
        ],
        "swisslife_sante_specific": [
          {
            "name": "solution_details",
            "label": "Solution 1: H1D1O1M1P1S0",
            "default": true,
            "disabled": true
          },
          {
            "name": "info_100_sante",
            "label": "Qu'est ce que le 100% santé?",
            "default": true,
            "required": false
          },
          {
            "name": "fiche_services",
            "label": "Fiche Services",
            "default": true,
            "required": false
          },
          {
            "name": "fiche_assistance",
            "label": "Fiche Assistance",
            "default": true,
            "required": false
          },
          {
            "name": "fiche_forfait_prevention",
            "label": "Fiche Forfait Prévention",
            "default": true,
            "required": false
          },
          {
            "name": "dispositions_generales",
            "label": "Dispositions générales",
            "default": true,
            "disabled": true
          },
          {
            "name": "convention_assistance",
            "label": "Convention d'assistance",
            "default": true,
            "disabled": true
          },
          {
            "name": "ipid",
            "label": "Document d'information normalisé (IPID)",
            "default": true,
            "disabled": true
          }
        ]
      },

      "acknowledgment": {
        "field": {
          "name": "devoir_information_acknowledgment",
          "type": "checkbox",
          "id": "devoir-information",
          "required": true,
          "label": "J'ai pris connaissance, de mon devoir d'information précontractuel en vertu de l'article L.112-2 du Code des assurances, en remettant au candidat à l'assurance et en avant vente : - l'IPID, - le devoir de conseil, - le projet contenant le prix et les garanties, - les dispositions générales, - la convention d'assistance.",
          "validation_message": "Veuillez prendre connaissance des informations et cocher la case au sujet de l'envoi de la liasse précontractuelle"
        }
      },

      "distribution_options": {
        "print": {
          "button": "Imprimer",
          "triggers": "Opens modal 'Edition' with client data form"
        },
        "email": {
          "fields": [
            {
              "name": "client_email",
              "type": "textbox",
              "label": "Email :",
              "required": true
            }
          ],
          "button": "ENVOYER LA LIASSE PRECONTRACTUELLE PAR EMAIL"
        }
      },

      "modal_edition_client_data": {
        "modal_title": "Edition",
        "trigger": "Clicking 'Imprimer' button",
        "required_before_print": true,
        "fields": [
          {
            "name": "civilite",
            "type": "combobox",
            "required": false,
            "options": ["Monsieur", "Madame"],
            "default": "Monsieur"
          },
          {
            "name": "nom",
            "type": "textbox",
            "id": "nom-client",
            "required": true,
            "test_value": "Dupont"
          },
          {
            "name": "prenom",
            "type": "textbox",
            "id": "prenom-client",
            "required": true,
            "test_value": "Jean"
          },
          {
            "name": "tel_personnel",
            "type": "textbox",
            "required": false
          },
          {
            "name": "email_personnel",
            "type": "textbox",
            "required": false
          },
          {
            "name": "adresse",
            "type": "textbox",
            "required": false
          },
          {
            "name": "code_postal",
            "type": "textbox",
            "required": false
          },
          {
            "name": "ville",
            "type": "combobox",
            "required": false
          },
          {
            "name": "pays",
            "type": "combobox",
            "required": false,
            "default": "france"
          }
        ],
        "buttons": ["Annuler", "Imprimer"],
        "on_submit": {
          "action": "Generate PDF",
          "pdf_opens_in": "New tab",
          "pdf_url_pattern": "https://oav-pool2.swisslifeone.fr/SLSISWeb/openEdition/pdf?editionId={UUID}&id={UUID}",
          "pdf_filename_pattern": "slsis_YYYYMMDDHHMMSS_{nom}_{prenom}_{random}.pdf",
          "adds_to_list": "Liste des éditions précédemment générées"
        }
      },

      "editions_list": {
        "section_title": "Liste des éditions précédemment générées",
        "shows_generated_pdfs": true,
        "actions_per_pdf": ["Download", "Delete"]
      },

      "validation_flow": {
        "step_1": "Select mode_de_vente (required)",
        "step_2": "Check devoir_information_acknowledgment (required)",
        "step_3": "Either print OR send email (required before SUIVANT)",
        "step_4": "If print: Fill client data modal (Nom + Prénom required)",
        "step_5": "PDF generated and added to list",
        "step_6": "Can click SUIVANT to proceed to Step 4"
      }
    },

    "summary": {
      "total_tabs": 3,
      "total_fields_tab_2": 1,
      "total_checkboxes_tab_3": 11,
      "modal_fields": 9,
      "required_fields": 4,
      "validation_dialogs": 2
    }
  },

  "STEP_4_souscription": {
    "step_name": "Souscription",
    "exploration_status": "NOT EXPLORED - Stopped before submission",
    "visible_elements": {
      "tabs": [
        "STATUT DE LA SOUSCRIPTION",
        "Souscripteur (assuré principal)",
        "Edition et souscription"
      ],
      "fields_visible": [
        {
          "name": "formule_garanties",
          "type": "combobox",
          "options": ["H1D1O1M1P1S0"]
        },
        {
          "name": "choix_action",
          "type": "combobox",
          "options": [
            "Sélectionnez",
            "Souscription avec signature électronique",
            "Souscription sans signature électronique"
          ]
        }
      ],
      "note": "Full exploration of Step 4 was intentionally avoided to prevent actual subscription"
    }
  },

  "ui_components": {
    "datepicker": {
      "trigger": "Click on any date textbox",
      "components": {
        "month_selector": {
          "type": "combobox",
          "options": ["janv.", "févr.", "mars", "avr.", "mai", "juin", "juil.", "août", "sept.", "oct.", "nov.", "déc."]
        },
        "year_selector": {
          "type": "combobox",
          "min_year": 1925,
          "max_year": 2011,
          "total_years": 87
        },
        "navigation": {
          "buttons": ["Précédent", "Suivant"]
        },
        "calendar_grid": "Full month calendar with clickable day links"
      }
    },
    "info_tooltips": {
      "count": 5,
      "locations": [
        "Date de naissance",
        "Régime social",
        "Statut",
        "Nombre d'enfants",
        "Date d'effet"
      ]
    },
    "help_links": {
      "count": 3,
      "links": [
        "FAQ Madelin Prévoyance",
        "La résiliation infra annuelle des contrats santé",
        "En savoir plus sur la réforme 100% Santé"
      ]
    }
  },

  "technical_details": {
    "framework": "Angular 18.2.14",
    "container": "iframe[name='iFrameTarificateur']",
    "load_time": "30-60 seconds typical",
    "common_issues": [
      "504 Gateway Timeout errors frequent",
      "Long initial load time",
      "Dynamic field loading delays"
    ],
    "authentication": {
      "type": "ADFS/SAML",
      "login_url": "https://adfs.swisslife.fr/adfs/ls/",
      "credential_format": "Alphanumeric (e.g., UPFK76G)",
      "session_timeout": "After inactivity"
    }
  },

  "exploration_summary": {
    "total_steps_explored": 3,
    "total_fields_mapped": 70,
    "new_fields_discovered": 3,
    "screenshots_captured": 8,
    "pdf_generated": true,
    "form_submitted": false,
    "exploration_complete": true,
    "ready_for_implementation": true
  }
}
