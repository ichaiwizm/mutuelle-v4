<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulaire</title>
    <link rel="stylesheet" href="styles/premium.css">
</head>
<body>
    <div class="form-container">
        <form id="premium-form" data-testid="premium-form">
            <!-- Section Informations personnelles -->
            <div class="form-section">
                <h2>Informations personnelles</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label for="civilite">Civilité *</label>
                        <select id="civilite" name="civilite" data-testid="civilite" required>
                            <option value="">Sélectionnez</option>
                            <option value="M.">M.</option>
                            <option value="Mme">Mme</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="nom">Nom *</label>
                        <input type="text" id="nom" name="nom" data-testid="nom" required />
                    </div>

                    <div class="form-group">
                        <label for="prenom">Prénom *</label>
                        <input type="text" id="prenom" name="prenom" data-testid="prenom" required />
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="dateNaissance">Date de naissance *</label>
                        <input type="date" id="dateNaissance" name="dateNaissance" data-testid="dateNaissance" required />
                        <small class="hint">Minimum 18 ans</small>
                    </div>

                    <div class="form-group">
                        <label for="numeroSecuriteSociale">Numéro de sécurité sociale *</label>
                        <input type="text" id="numeroSecuriteSociale" name="numeroSecuriteSociale" data-testid="numeroSecuriteSociale" required maxlength="15" />
                    </div>
                </div>
            </div>

            <!-- Section Contact -->
            <div class="form-section">
                <h2>Contact</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label for="email">Email *</label>
                        <input type="email" id="email" name="email" data-testid="email" required />
                    </div>

                    <div class="form-group">
                        <label for="telephone">Téléphone *</label>
                        <input type="tel" id="telephone" name="telephone" data-testid="telephone" required />
                        <small class="hint">Format: 06.XX.XX.XX.XX</small>
                    </div>
                </div>
            </div>

            <!-- Section Adresse -->
            <div class="form-section">
                <h2>Adresse</h2>

                <div class="form-group">
                    <label for="adresse">Adresse *</label>
                    <input type="text" id="adresse" name="adresse" data-testid="adresse" required />
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="ville">Ville *</label>
                        <input type="text" id="ville" name="ville" data-testid="ville" required />
                    </div>

                    <!-- Code postal apparaît 400ms après avoir rempli ville -->
                    <div class="form-group delayed-field" id="codePostal-group" style="display: none;">
                        <label for="codePostal">Code postal *</label>
                        <input type="text" id="codePostal" name="codePostal" data-testid="codePostal" required maxlength="5" />
                        <small class="hint">5 chiffres</small>
                    </div>
                </div>
            </div>

            <!-- Section Professionnelle -->
            <div class="form-section">
                <h2>Informations professionnelles</h2>

                <div class="form-row">
                    <div class="form-group">
                        <label for="profession">Profession *</label>
                        <select id="profession" name="profession" data-testid="profession" required>
                            <option value="">Sélectionnez</option>
                            <option value="Consultant">Consultant</option>
                            <option value="Independant">Indépendant</option>
                            <option value="Artisan">Artisan</option>
                            <option value="Salarie">Salarié</option>
                            <option value="En recherche d'emploi">En recherche d'emploi</option>
                            <option value="Retraite">Retraité</option>
                            <option value="Etudiant">Étudiant</option>
                            <option value="Fonctionnaire">Fonctionnaire</option>
                            <option value="Agriculteur">Agriculteur</option>
                            <option value="Autre">Autre</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="regimeSocial">Régime social *</label>
                        <input type="text" id="regimeSocial" name="regimeSocial" data-testid="regimeSocial" required />
                    </div>
                </div>

                <!-- Régime fiscal - apparaît si profession = Independant ou TNS -->
                <div class="form-group conditional-field" id="regimeFiscal-group" style="display: none;">
                    <label>Régime fiscal *</label>
                    <div class="radio-group">
                        <label>
                            <input type="radio" name="regimeFiscal" value="Micro-entreprise" data-testid="regimeFiscal" />
                            Micro-entreprise
                        </label>
                        <label>
                            <input type="radio" name="regimeFiscal" value="Réel simplifié" data-testid="regimeFiscal" />
                            Réel simplifié
                        </label>
                        <label>
                            <input type="radio" name="regimeFiscal" value="Réel normal" data-testid="regimeFiscal" />
                            Réel normal
                        </label>
                    </div>
                </div>
            </div>

            <!-- Section Situation actuelle -->
            <div class="form-section">
                <h2>Situation actuelle</h2>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="actuellementAssure" name="actuellementAssure" data-testid="actuellementAssure" />
                        Actuellement assuré
                    </label>
                </div>

                <!-- Mutuelle actuelle - apparaît si actuellement assuré -->
                <div class="form-group conditional-field" id="mutuelleActuelle-group" style="display: none;">
                    <label for="mutuelleActuelle">Nom de votre mutuelle actuelle *</label>
                    <input type="text" id="mutuelleActuelle" name="mutuelleActuelle" data-testid="mutuelleActuelle" />
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="antecedentsMedicaux" name="antecedentsMedicaux" data-testid="antecedentsMedicaux" />
                        Antécédents médicaux particuliers
                    </label>
                </div>
            </div>

            <!-- Section Projet -->
            <div class="form-section">
                <h2>Votre projet</h2>

                <div class="form-group">
                    <label for="dateEffet">Date d'effet souhaitée *</label>
                    <input type="date" id="dateEffet" name="dateEffet" data-testid="dateEffet" required />
                    <small class="hint">Minimum 7 jours dans le futur</small>
                </div>
            </div>

            <!-- Section Famille -->
            <div class="form-section">
                <h2>Situation familiale</h2>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="hasConjoint" name="hasConjoint" data-testid="hasConjoint" />
                        Avec conjoint
                    </label>
                </div>

                <!-- Champs conjoint - conditionnels -->
                <div id="conjoint-fields" class="conditional-section" style="display: none;">
                    <h3>Informations conjoint</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="conjoint_dateNaissance">Date de naissance</label>
                            <input type="date" id="conjoint_dateNaissance" name="conjoint_dateNaissance" data-testid="conjoint_dateNaissance" />
                        </div>
                        <div class="form-group">
                            <label for="conjoint_profession">Profession</label>
                            <select id="conjoint_profession" name="conjoint_profession" data-testid="conjoint_profession">
                                <option value="">Sélectionnez</option>
                                <option value="Consultant">Consultant</option>
                                <option value="Independant">Indépendant</option>
                                <option value="Artisan">Artisan</option>
                                <option value="Salarie">Salarié</option>
                                <option value="En recherche d'emploi">En recherche d'emploi</option>
                                <option value="Retraite">Retraité</option>
                                <option value="Etudiant">Étudiant</option>
                                <option value="Fonctionnaire">Fonctionnaire</option>
                                <option value="Agriculteur">Agriculteur</option>
                                <option value="Autre">Autre</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="nombreEnfants">Nombre d'enfants</label>
                    <input type="number" id="nombreEnfants" name="nombreEnfants" data-testid="nombreEnfants" min="0" max="10" value="0" />
                </div>

                <!-- Conteneur pour les enfants (généré dynamiquement) -->
                <div id="children-container"></div>
            </div>

            <!-- Bouton de soumission -->
            <div class="form-actions">
                <button type="submit" class="btn-primary" data-testid="submit-button">
                    Continuer vers la sélection des garanties
                </button>
            </div>
        </form>
    </div>

    <script src="/products/premium/scripts/delays.js"></script>
    <script src="/products/premium/scripts/conditional-fields.js"></script>
    <script src="/products/premium/scripts/validation.js"></script>
    <script src="/products/premium/scripts/form.js"></script>
</body>
</html>
